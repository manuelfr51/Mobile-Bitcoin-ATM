{% extends "base.html" %}
{% load i18n %}
{% block content %}
    <div class="container">
        <div class="page-header">
          <h3 class="pull-left">{% trans "Bitcoin Settings" %}</h3>
          <div class="clearfix"></div>
        </div>
        <div class="col-md-8 col-md-offset-2">
            {% with current_step=1 %}
                 {% include "merchants/_registration_breadcrumb.html" %}
            {% endwith %}
             <form class="form-horizontal" method="post" action="{% url "merchants.views.register_bitcoin" %}" >
                 {% load crispy_forms_tags %}
                 {{ form|crispy }}
                 {% csrf_token %}
                 <div class="button-wrapper">
                   <button type="submit" class="btn btn-primary btn-lg">{% trans "Complete Registration" %}</button>
                 </div>
             </form>
          </div>
    </div>
{% endblock content %}


{% block extra_js %}

     <script>
      function selectCoinbase() {
        $("#div_id_cb_api_key").removeClass("hidden");
        $("#div_id_cb_secret_key").removeClass("hidden");

        $("#div_id_bs_api_key").addClass("hidden");
        $("#div_id_bs_secret_key").addClass("hidden");
        $("#div_id_bs_username").addClass("hidden");

        $("#div_id_bci_main_password").addClass("hidden");
        $("#div_id_bci_second_password").addClass("hidden");
        $("#div_id_bci_username").addClass("hidden");
        
        $("#div_id_btc_address").addClass("hidden");
      }

      function selectBitstamp() {
        $("#div_id_cb_api_key").addClass("hidden");
        $("#div_id_cb_secret_key").addClass("hidden");

        $("#div_id_bs_api_key").removeClass("hidden");
        $("#div_id_bs_secret_key").removeClass("hidden");
        $("#div_id_bs_username").removeClass("hidden");

        $("#div_id_bci_main_password").addClass("hidden");
        $("#div_id_bci_second_password").addClass("hidden");
        $("#div_id_bci_username").addClass("hidden");

        $("#div_id_btc_address").addClass("hidden");
      }

      function selectBlockchain() {
        $("#div_id_cb_api_key").addClass("hidden");
        $("#div_id_cb_secret_key").addClass("hidden");

        $("#div_id_bs_api_key").addClass("hidden");
        $("#div_id_bs_secret_key").addClass("hidden");
        $("#div_id_bs_username").addClass("hidden");

        $("#div_id_bci_main_password").removeClass("hidden");
        $("#div_id_bci_second_password").removeClass("hidden");
        $("#div_id_bci_username").removeClass("hidden");

        $("#div_id_btc_address").addClass("hidden");
      }

      function selectSelfManaged() {
        $("#div_id_cb_api_key").addClass("hidden");
        $("#div_id_cb_secret_key").addClass("hidden");

        $("#div_id_bs_api_key").addClass("hidden");
        $("#div_id_bs_secret_key").addClass("hidden");
        $("#div_id_bs_username").addClass("hidden");

        $("#div_id_bci_main_password").addClass("hidden");
        $("#div_id_bci_second_password").addClass("hidden");
        $("#div_id_bci_username").addClass("hidden");

        $("#div_id_btc_address").removeClass("hidden");
      }

      $("#id_exchange_choice_1, #id_exchange_choice_2, #id_exchange_choice_3, #id_exchange_choice_4").change(function(){
           if ($('input[name=exchange_choice]:checked').val() == 'coinbase') {
                selectCoinbase();
           }else if ($('input[name=exchange_choice]:checked').val() == 'bitstamp'){
                selectBitstamp();
           }else if ($('input[name=exchange_choice]:checked').val() == 'blockchain') {
                selectBlockchain();
           }else if ($('input[name=exchange_choice]:checked').val() == 'selfmanaged'){
                selectSelfManaged();
           }
      });

      
      $(document).ready(function(){
          var required_asterisk = '<span class="asteriskField">*</span>';
          $('label:not(.requiredField):not(.radio)').append(required_asterisk);
          // blockchain second password not required 
          $('#div_id_bci_second_password .asteriskField').remove();
          
          if ($('input[name=exchange_choice]:checked').val() == 'coinbase') {
               selectCoinbase();
          }else if ($('input[name=exchange_choice]:checked').val() == 'bitstamp') {
               selectBitstamp();
          }else if ($('input[name=exchange_choice]:checked').val() == 'blockchain') {
               selectBlockchain();
          }else if ($('input[name=exchange_choice]:checked').val() == 'selfmanaged') {
               selectSelfManaged();
          }
      });
     </script>

{% endblock %}